(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[17],{67:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(7),s=a(12),l=a(13),o=a(17),i=a(15),u=a(16),p=a(0),d=a.n(p),m=a(21),h=a(22),f=function(){var e=Object(r.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.fetch_get(m.a.SEND_CODE_API+"?tel="+t);case 2:if(0!==(a=e.sent).code){e.next=8;break}return console.log("\u9a8c\u8bc1\u7801..."),e.abrupt("return",a.data.code);case 8:return console.log("\u53d1\u9001\u5931\u8d25\u4e86...."),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();a(67);a.d(t,"default",(function(){return E}));var v=null,E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).servercode="./././",a.countAction=function(){clearInterval(v),v=setInterval((function(){var e=a.state.count;0===e&&(a.setState({count:60,sended:!1}),a.servercode="./././",clearInterval(v)),a.setState({count:--e})}),1e3)},a.state={code:"",sended:!1,tel:"",count:60},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"sendCode",value:function(){var e=Object(r.a)(c.a.mark((function e(){var t,a,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.sended,t.tel){e.next=4;break}return window.mui.toast("\u8bf7\u5148\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7\u7801\uff01"),e.abrupt("return");case 4:if(!a){e.next=7;break}return window.mui.toast("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\uff0c60s\u5185\u8bf7\u52ff\u91cd\u590d\u64cd\u4f5c\uff01"),e.abrupt("return");case 7:f(this.state.tel).then((function(e){console.log("\u9a8c\u8bc1\u7801\u53d1\u9001:",e),n.servercode=e,n.setState({sended:!0}),n.countAction()}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"chageAction",value:function(e,t){"tel"===e?this.setState({tel:t.target.value}):"code"===e&&this.setState({code:t.target.value})}},{key:"loginAction",value:function(){if(!this.state.code||!this.state.tel)return alert("\u5fc5\u987b\u5b8c\u6574\u8f93\u5165\u624b\u673a\u53f7\u548c\u9a8c\u8bc1\u7801\uff01"),!1;this.state.code===this.servercode?(localStorage.setItem("curruser",this.state.tel),this.props.history.push("/mine")):alert("\u624b\u673a\u53f7\u6216\u9a8c\u8bc1\u7801\u9519\u8bef!")}},{key:"render",value:function(){var e=this.state,t=e.code,a=e.sended,n=e.tel,c=e.count;return d.a.createElement("div",{className:"page",id:"login"},d.a.createElement("h3",{className:"toptitle border-bottom"},"\u767b\u9646"),d.a.createElement("div",{className:"content"},d.a.createElement("h3",null,"\u5728\u8fd9\u91cc"),d.a.createElement("h3",null,"\u6536\u83b7\u77e5\u8bc6\u548c\u5b66\u53cb"),d.a.createElement("div",{className:"panel"},d.a.createElement("p",null,d.a.createElement("span",{className:"iconfont icon-yonghu"}),d.a.createElement("input",{maxLength:"11",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",value:n,onChange:this.chageAction.bind(this,"tel")})),d.a.createElement("p",null,d.a.createElement("span",{className:"iconfont icon-suo"}),d.a.createElement("input",{maxLength:"6",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",value:t,onChange:this.chageAction.bind(this,"code")}),d.a.createElement("span",{className:"sendcode",style:{background:a?"#999":"#0ed30e"},onClick:this.sendCode.bind(this)},a?c+"s":"\u53d1\u9001\u9a8c\u8bc1\u7801")),d.a.createElement("p",null,d.a.createElement("span",{className:"forget"},"\u5fd8\u8bb0\u5bc6\u7801\uff1f")),d.a.createElement("p",{className:"btn",onClick:this.loginAction.bind(this)},d.a.createElement("span",null,"\u767b\u9646")))),d.a.createElement("div",{className:"thirdparty"},d.a.createElement("p",{className:"title"},"\u2014\u2014\u2014\u2014 \u7b2c\u4e09\u65b9\u767b\u9646 \u2014\u2014\u2014\u2014"),d.a.createElement("p",{className:"logo"},d.a.createElement("span",{className:"iconfont icon-qq"}),d.a.createElement("span",{className:"iconfont icon-weixin"}),d.a.createElement("span",{className:"iconfont icon-weibo"})),d.a.createElement("p",{className:"protocol"},"\u767b\u5f55\u8868\u793a\u540c\u610f",d.a.createElement("span",null,"\u300a\u7528\u6237\u534f\u8bae\u300b"),"\u548c",d.a.createElement("span",null,"\u9690\u79c1\u653f\u7b56"))))}}]),t}(p.Component)}}]);
//# sourceMappingURL=17.e7b7f0b4.chunk.js.map